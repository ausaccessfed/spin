<%-
    url = if @project_role.new_record?
            organisation_project_roles_path(@organisation, @project)
          else
            organisation_project_role_path(@organisation, @project, @project_role)
          end
-%>

<%= form_for([@organisation, @project, @project_role], url: url,
             html: {id: 'project_role-form'}) do |f| -%>
  <%= field_block do -%>
    <%= f.label :name do -%>
      Name
      <%= field_help_text('The project name') %>
    <%- end -%>
    <%= f.text_field :name %>
  <%- end -%>

  <%= field_block do -%>
    <%= f.label :role_arn do -%>
      Role ARN
      <%= field_help_text('The ARN referenced in the AWS project role') %>
    <%- end -%>
    <%= f.text_field :role_arn %>
  <%- end -%>

  <%= error_messages_tag %>

  <div class="line-of-buttons">
    <%= f.button(class: 'large green icon') do -%>
      <%= icon_tag('checkmark') %>
      <%= submit_label %>
    <%- end -%>

    <%= button_link_to(organisation_project_roles_path(@organisation, @project), class: 'large icon') do -%>
      <%= icon_tag('cancel') %>
      Cancel
    <%- end -%>
  </div>
<%- end -%>

<%= validate_form('#project_role-form', :project_role) do -%>
  <%= validate_field(:role_arn, empty: 'Please enter a Role ARN',
                     role_arn: 'Role ARN format must be' \
                     ' <pre>arn:aws:iam::<strong>&ltnumber&gt</strong>' \
                     ':role/<strong>&ltstring&gt</strong></pre>') %>
<%- end -%>
